<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Adds Identification Data</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for addIdentificationData-methods {MSnbase}"><tr><td>addIdentificationData-methods {MSnbase}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2> Adds Identification Data </h2>

<h3>Description</h3>

<p>These methods add identification data to a raw MS experiment (an
<code>"<a href="MSnExp-class.html">MSnExp</a>"</code> object) or to quantitative data (an
<code>"<a href="MSnSet-class.html">MSnSet</a>"</code> object). The identification data needs
to be available as a <code>mzIdentML</code> file (and passed as filenames,
or directly as identification object) or, alternatively, can be passed
as an arbitrary <code>data.frame</code>. See details in the <em>Methods</em>
section.
</p>


<h3>Details</h3>

<p>The <code>featureData</code> slots in a <code>"<a href="MSnExp-class.html">MSnExp</a>"</code> or a
<code>"<a href="MSnSet-class.html">MSnSet</a>"</code> instance provides only one row per MS2
spectrum but the identification is not always bijective. Prior to
addition, the identification data is filtered as documented in the
<code><a href="filterIdentificationDataFrame.html">filterIdentificationDataFrame</a></code> function: (1) only PSMs
matching the regular (non-decoy) database are retained; (2) PSMs or
rank greater than 1 are discarded; and (3) only proteotypic peptides
are kept.
</p>
<p>If after filtering, more then one PSM per spectrum are still present,
these are combined (reduced, see
<code><a href="reduce-data.frame-method.html">reduce,data.frame-method</a></code>) into a single row and
separated by a semi-colon. This has as side-effect that feature
variables that are being reduced are converted to characters. See the
<code>reduce</code> manual page for examples.
</p>
<p>See also the section about identification data in the
<em>MSnbase-demo</em> vignette for details and additional examples.
</p>
<p>After addition of the identification data, new feature variables are
created. The column <code>nprot</code> contains the number of members in the
protein group; the columns <code>accession</code> and <code>description</code>
contain a semicolon separated list of all matches. The columns
<code>npsm.prot</code> and <code>npep.prot</code> represent the number of PSMs and
peptides that were matched to a particular protein group. The column
<code>npsm.pep</code> indicates how many PSMs were attributed to a peptide
(as defined by its sequence <code>pepseq</code>). All these values are
re-calculated after filtering and reduction.
</p>


<h3>Methods</h3>


<dl>
<dt><code>signature(object = "MSnExp", id = "character", ...</code></dt><dd>
<p>Adds the identification data stored in mzIdentML files to a
<code>"<a href="MSnExp-class.html">MSnExp</a>"</code> instance. The method handles one or
multiple mzIdentML files provided via <code>id</code>. <code>id</code> has to
be a <code>character</code> vector of valid filenames. See below for
additional arguments.
</p>
</dd>
<dt><code>signature(object = "MSnExp", id = "mzID", ...)</code></dt><dd><p> Same
as above but <code>id</code> is a <code>mzID</code> object generated by
<code>mzID::mzID</code>. See below for additional arguments. </p>
</dd>
<dt><code>signature(object = "MSnExp", id = "mzIDCollection",
	...)</code></dt><dd><p> Same as above but <code>id</code> is a <code>mzIDCollection</code>
object. See below for additional arguments. </p>
</dd>
<dt><code>signature(object = "MSnExp", id = "mzRident", ...</code></dt><dd>
<p>Same as above but <code>id</code> is a <code>mzRident</code> object generated
by <code>mzR::openIdfile</code>. See below for additional arguments. </p>
</dd>
<dt><code>signature(object = "MSnExp", id = "data.frame", ...</code></dt><dd>
<p>Same as above but <code>id</code> could be a <code>data.frame</code>. See
below for additional arguments. </p>
</dd>
<dt><code>signature(object = "MSnSet", id = "character", ...)</code></dt><dd>
<p>Adds the identification data stored in mzIdentML files to an
<code>"<a href="MSnSet-class.html">MSnSet</a>"</code> instance.  The method handles one or
multiple mzIdentML files provided via <code>id</code>. <code>id</code> has to
be a <code>character</code> vector of valid filenames. See below for
additional arguments. </p>
</dd>
<dt><code>signature(object = "MSnSet", id = "mzID", ...)</code></dt><dd><p> Same
as above but <code>id</code> is a <code>mzID</code> object. See below for
additional arguments.  </p>
</dd>
<dt><code>signature(object = "MSnSet", id = "mzIDCollection",
	...)</code></dt><dd><p> Same as above but <code>id</code> is a <code>mzIDCollection</code>
object. See below for additional arguments.  </p>
</dd>
<dt><code>signature(object = "MSnSet", id = "data.frame", ...)</code></dt><dd>
<p>Same as above but <code>id</code> is a <code>data.frame</code>.  See below for
additional arguments.  </p>
</dd>
</dl>

<p>The methods above take the following additional argument. These need
to be set when adding identification data as a <code>data.frame</code>. In
all other cases, the defaults are set automatically.
</p>

<dl>
<dt>fcol</dt><dd>
<p>The matching between the features (raw spectra or quantiative
features) and identification results is done by matching columns
in the featue data (the <code>featureData</code> slot) and the
identification data. These values are the spectrum file index and
the acquisition number, passed as a <code>character</code> of length
2. The default values for these variables in the <code>object</code>'s
feature data are <code>"spectrum.file"</code> and
<code>"acquisition.num"</code>. Values need to be provided when
<code>id</code> is a <code>data.frame</code>.
</p>
</dd>
<dt>icol</dt><dd>
<p>The default values for the spectrum file and acquisition numbers
in the identification data (the <code>id</code> argument) are
<code>"spectrumFile"</code> and <code>"acquisitionNum"</code>. Values need to
be provided when <code>id</code> is a <code>data.frame</code>.
</p>
</dd>
<dt>acc</dt><dd>
<p>The protein (group) accession number or identifier. Defaults are
<code>"DatabaseAccess"</code> when passing filenames or <code>mzRident</code>
objects and <code>"accession"</code> when passing <code>mzID</code> or
<code>mzIDCollection</code> objects. A value needs to be provided when
<code>id</code> is a <code>data.frame</code>.
</p>
</dd>
<dt>desc</dt><dd>
<p>The protein (group) description. Defaults are
<code>"DatabaseDescription"</code> when passing filenames or
<code>mzRident</code> objects and <code>"description"</code> when passing
<code>mzID</code> or <code>mzIDCollection</code> objects. A value needs to be
provided when <code>id</code> is a <code>data.frame</code>.
</p>
</dd>
<dt>pepseq</dt><dd>
<p>The peptide sequence variable name. Defaults are <code>"sequence"</code>
when passing filenames or <code>mzRident</code> objects and
<code>"pepseq"</code> when passing <code>mzID</code> or <code>mzIDCollection</code>
objects. A value needs to be provided when <code>id</code> is a
<code>data.frame</code>.
</p>
</dd>
<dt>key</dt><dd>
<p>The key to be used when the identification data need to be reduced
(see details section). Defaults are <code>"spectrumID"</code> when
passing filenames or <code>mzRident</code> objects and
<code>"spectrumid"</code> when passing <code>mzID</code> or
<code>mzIDCollection</code> objects. A value needs to be provided when
<code>id</code> is a <code>data.frame</code>.
</p>
</dd>
<dt>decoy</dt><dd>
<p>The feature variable used to define whether the PSM was matched in
the decoy of regular fasta database for PSM filtering. Defaults
are <code>"isDecoy"</code> when passing filenames or <code>mzRident</code>
objects and <code>"isdecoy"</code> when passing <code>mzID</code> or
<code>mzIDCollection</code> objects. A value needs to be provided when
<code>id</code> is a <code>data.frame</code>. See
<code><a href="filterIdentificationDataFrame.html">filterIdentificationDataFrame</a></code> for details.
</p>
</dd>
<dt>rank</dt><dd>
<p>The feature variable used to defined the rank of the PSM for
filtering. Defaults is <code>"rank"</code>. A value needs to be provided
when <code>id</code> is a <code>data.frame</code>. See
<code><a href="filterIdentificationDataFrame.html">filterIdentificationDataFrame</a></code> for details.
</p>
</dd>
<dt>accession</dt><dd>
<p>The feature variable used to defined the protein (groupo)
accession or identifier for PSM filterin. Defaults is to use the
same value as <code>acc</code> . A value needs to be provided when
<code>id</code> is a <code>data.frame</code>. See
<code><a href="filterIdentificationDataFrame.html">filterIdentificationDataFrame</a></code> for details.
</p>
</dd>
<dt>verbose</dt><dd><p>A <code>logical</code> defining whether to print out
messages or not. Default is to use the session-wide open from
<code><a href="MSnbaseOptions.html">isMSnbaseVerbose</a></code>.</p>
</dd>
</dl>



<h3>Author(s)</h3>

<p>Sebastian Gibb &lt;mail@sebastiangibb.de&gt; and Laurent Gatto
</p>


<h3>See Also</h3>

<p><code><a href="filterIdentificationDataFrame.html">filterIdentificationDataFrame</a></code> for the function that
filters identification data, <code><a href="readMzIdData.html">readMzIdData</a></code> to read the
identification data as a unfiltered <code>data.frame</code> and
<code><a href="reduce-data.frame-method.html">reduce,data.frame-method</a></code> to reduce it to a
<code>data.frame</code> that contains only unique PSMs per row.
</p>


<h3>Examples</h3>

<pre>
## find path to a mzXML file
quantFile &lt;- dir(system.file(package = "MSnbase", dir = "extdata"),
                 full.name = TRUE, pattern = "mzXML$")
## find path to a mzIdentML file
identFile &lt;- dir(system.file(package = "MSnbase", dir = "extdata"),
                 full.name = TRUE, pattern = "dummyiTRAQ.mzid")

## create basic MSnExp
msexp &lt;- readMSData(quantFile)

## add identification information
msexp &lt;- addIdentificationData(msexp, identFile)

## access featureData
fData(msexp)

idSummary(msexp)
</pre>

<hr /><div style="text-align: center;">[Package <em>MSnbase</em> version 2.4.2 <a href="00Index.html">Index</a>]</div>
</body></html>
